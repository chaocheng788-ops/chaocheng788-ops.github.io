<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>飞书SDK验证Demo</title>
    <!-- 用兼容GitHub的SDK CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@lark-base-open/js-sdk@1.2.0/dist/index.umd.min.js"></script>
</head>
<body>
    <h3>飞书SDK验证结果：<span id="result">未验证</span></h3>
    <button onclick="testSDK()">点击验证SDK</button>

    <script>
        async function testSDK() {
            const resultDom = document.getElementById('result');
            try {
                // 验证1：SDK是否挂载
                if (!window.bitable) throw new Error('SDK未挂载（window.bitable不存在）');
                if (!window.bitable.base) throw new Error('SDK核心模块缺失（base不存在）');

                // 验证2：调用核心API（获取当前表格）
                const table = await window.bitable.base.getActiveTable();
                if (!table) throw new Error('无法获取当前表格（无活跃表格）');

                // 验证3：调用表格基础API
                const tableMeta = await table.getMeta(); // 获取表格元信息
                resultDom.style.color = 'green';
                resultDom.textContent = `SDK可用！当前表格名称：${tableMeta.name}`;
            } catch (err) {
                resultDom.style.color = 'red';
                resultDom.textContent = `SDK不可用：${err.message}`;
            }
        }
    </script>
</body>
</html>
